<!doctype html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Chicken &raquo; Egg specification format</title>
<meta name="viewport" content="initial-scale=1" /></head>
<body>
<div id="body">
<div id="main">
<div id="toc">
<h2 class="toc">TOC &raquo;</h2>
<ul class="toc">
<li><a href="#sec:Format_of_the_egg_description_file">Format of the egg description file</a>
<ul>
<li><a href="#sec:Global_properties">Global properties</a>
<ul>
<li><a href="#sec:version">version</a></li>
<li><a href="#sec:synopsis">synopsis</a></li>
<li><a href="#sec:author">author</a></li>
<li><a href="#sec:maintainer">maintainer</a></li>
<li><a href="#sec:category">category</a></li>
<li><a href="#sec:license">license</a></li>
<li><a href="#sec:dependencies">dependencies</a></li>
<li><a href="#sec:test-dependencies">test-dependencies</a></li>
<li><a href="#sec:build-dependencies">build-dependencies</a></li>
<li><a href="#sec:foreign-dependencies">foreign-dependencies</a></li>
<li><a href="#sec:platform">platform</a></li>
<li><a href="#sec:distribution-files">distribution-files</a></li>
<li><a href="#sec:components">components</a></li>
<li><a href="#sec:host">host</a></li>
<li><a href="#sec:target">target</a></li>
<li><a href="#sec:component-options">component-options</a></li>
<li><a href="#sec:cond-expand">cond-expand</a></li>
<li><a href="#sec:error">error</a></li></ul></li>
<li><a href="#sec:Component_types">Component types</a>
<ul>
<li><a href="#sec:extension">extension</a></li>
<li><a href="#sec:data">data</a></li>
<li><a href="#sec:generated-source-file">generated-source-file</a></li>
<li><a href="#sec:c-include">c-include</a></li>
<li><a href="#sec:scheme-include">scheme-include</a></li>
<li><a href="#sec:program">program</a></li>
<li><a href="#sec:c-object">c-object</a></li></ul></li>
<li><a href="#sec:Component_properties">Component properties</a>
<ul>
<li><a href="#sec:host">host</a></li>
<li><a href="#sec:target">target</a></li>
<li><a href="#sec:linkage">linkage</a></li>
<li><a href="#sec:types-file">types-file</a></li>
<li><a href="#sec:inline-file">inline-file</a></li>
<li><a href="#sec:custom-build">custom-build</a></li>
<li><a href="#sec:csc-options">csc-options</a></li>
<li><a href="#sec:link-options">link-options</a></li>
<li><a href="#sec:source">source</a></li>
<li><a href="#sec:install-name">install-name</a></li>
<li><a href="#sec:component-dependencies">component-dependencies</a></li>
<li><a href="#sec:source-dependencies">source-dependencies</a></li>
<li><a href="#sec:objects">objects</a></li>
<li><a href="#sec:destination">destination</a></li>
<li><a href="#sec:files">files</a></li>
<li><a href="#sec:modules">modules</a></li>
<li><a href="#sec:cond-expand">cond-expand</a></li>
<li><a href="#sec:error">error</a></li></ul></li></ul></li></ul></div><h2 id="sec:Format_of_the_egg_description_file"><a href="#sec:Format_of_the_egg_description_file">Format of the egg description file</a></h2><p>An egg description is basically an association list holding information about the components of the egg. An egg may contain multiple components: libraries, programs, Scheme or C include files and arbitrary data files. Dependencies between eggs can be specified as can be dependencies between components of an egg.</p><p>A list of valid properties follows.</p><h3 id="sec:Global_properties"><a href="#sec:Global_properties">Global properties</a></h3><h4 id="sec:version"><a href="#sec:version">version</a></h4><pre>[egg property] (version STRING)</pre><p>Specifies version string for this egg. <tt>STRING</tt> should have the format <tt>&lt;MAJOR&gt;.&lt;MINOR&gt;.&lt;PATCHLEVEL&gt;</tt>, where only the <tt>&lt;MAJOR&gt;</tt> part is mandatory.</p><p>Eggs from remote egg servers are automatically versioned - the version is part of the protocol to retrieve the egg and does not have to be specified in the <tt>.egg</tt> file. Eggs installed from local directories (see below) should explicitly specify a version.</p><h4 id="sec:synopsis"><a href="#sec:synopsis">synopsis</a></h4><pre>[egg property] (synopsis STRING)</pre><p>Gives a short description of this egg.</p><h4 id="sec:author"><a href="#sec:author">author</a></h4><pre>[egg property] (author STRING)</pre><p>Names the author or authors of the contained code.</p><h4 id="sec:maintainer"><a href="#sec:maintainer">maintainer</a></h4><pre>[egg property] (maintainer STRING)</pre><p>Names the maintainer of this code, if different from author(s).</p><h4 id="sec:category"><a href="#sec:category">category</a></h4><pre>[egg property] (category NAME)</pre><p>Gives the category under which this egg should be contained. See <a href="https://wiki.call-cc.org/chicken-projects/egg-index-5.html">the egg index</a> for a list of currently used categories.</p><h4 id="sec:license"><a href="#sec:license">license</a></h4><pre>[egg property] (license STRING)</pre><p>Names the license under which this code is available.</p><h4 id="sec:dependencies"><a href="#sec:dependencies">dependencies</a></h4><pre>[egg property] (dependencies EGG ...)</pre><p>Lists eggs that this egg depends on, and which should be built and installed if they do not already exist in the repository. <tt>EGG</tt> should be whether a symbol or a list of the form <tt>EGGNAME VERSION</tt>, where the former means to install the newest available egg with this name and the latter specifies a specific version or higher.</p><h4 id="sec:test-dependencies"><a href="#sec:test-dependencies">test-dependencies</a></h4><pre>[egg property] (test-dependencies EGG ...)</pre><p>Lists eggs that are required for this egg to run the tests (if tests exist.) This only has an effect if the <tt>-test</tt> option has been given to <tt>chicken-install</tt>.</p><h4 id="sec:build-dependencies"><a href="#sec:build-dependencies">build-dependencies</a></h4><pre>[egg property] (build-dependencies EGG ...)</pre><p>Lists eggs that are build-time dependencies for this egg, i.e. there are required to build, but not to run the contained code. Currently this is treated identical to <tt>dependencies</tt>.</p><h4 id="sec:foreign-dependencies"><a href="#sec:foreign-dependencies">foreign-dependencies</a></h4><pre>[egg property] (foreign-dependencies NAME ...)</pre><p>Lists external dependencies like native code libraries or system-specific packages and is currently only used for documentation purposes.</p><h4 id="sec:platform"><a href="#sec:platform">platform</a></h4><pre>[egg property] (platform PLATFORM)</pre><p>Specifies for which platform this egg is intended. <tt>PLATFORM</tt> should be a symbol naming the target platform (<tt>windows</tt>, <tt>linux</tt> or <tt>unix</tt>) or a boolean combination of platform values, allowed are <tt>(not PLATFORM)</tt>, <tt>(or PLATFORM ...)</tt> and <tt>(and PLATFORM ...)</tt>. If the expression can not be satisfied, then installation of this egg will abort.</p><h4 id="sec:distribution-files"><a href="#sec:distribution-files">distribution-files</a></h4><pre>[egg property] (distribution-files FILE ...)</pre><p>List of files required for the installation of the egg.  This form is not handled by chicken-install, but by henrietta-cache to determine what to cache. If the repository contains additional files that are unneeded for the egg to be installed, you can list all the required files in this clause to reduce the amount of data cached by egg servers.</p><h4 id="sec:components"><a href="#sec:components">components</a></h4><pre>[egg property] (components COMPONENT ...)</pre><p>Lists components (extensions, programs, include- or data files) that this extension installs. See <a href="#sec:component-types">Component types</a> and <a href="#sec:component-properties">component properties</a> for information on how to specify component-specific information.</p><h4 id="sec:host"><a href="#sec:host">host</a></h4><pre>[egg property] (host PROP ...)</pre><p>Recursively process <tt>PROP ...</tt>, but only for the host (build) platform, in case this is a &quot;cross-chicken&quot;, a CHICKEN installation intended for cross compilation.</p><h4 id="sec:target"><a href="#sec:target">target</a></h4><pre>[egg property] (target PROP ...)</pre><p>Recursively process <tt>PROP ...</tt>, but only for the target platform, in case this is a &quot;cross-chicken&quot;, a CHICKEN installation intended for cross compilation.</p><h4 id="sec:component-options"><a href="#sec:component-options">component-options</a></h4><pre>[egg property] (component-options OPTIONSPEC ...)</pre><p>Specifies global options for all programs and extensions compiled for this egg. <tt>OPTIONSPEC</tt> may be <tt>csc-options</tt>, <tt>link-options</tt> or <tt>linkage</tt> specifications.</p><h4 id="sec:cond-expand"><a href="#sec:cond-expand">cond-expand</a></h4><pre>[egg property] (cond-expand CLAUSE ...)</pre><p>Conditionally expand egg specification forms, depending on system features. Each <tt>CLAUSE</tt> should be of the form <tt>(TEST PROPERTY)</tt> where <tt>TEST</tt> is a feature identifier or a conditional form, in the same syntax as used in the <tt>cond-expand</tt> syntactic form.</p><p>In addition to normal system-wide feature identifiers, feature identifiers given via the <tt>-feature</tt> option to <tt>chicken-install</tt> are visible in the tests. Also, the features <tt>target</tt>, <tt>host</tt>, <tt>dynamic</tt> and <tt>static</tt> are visible, depending on surrounding egg specification forms for constraining mode and linkage.</p><h4 id="sec:error"><a href="#sec:error">error</a></h4><pre>[egg property] (error STRING ARG ...)</pre><p>Signal an error and abort processing. Mostly useful inside <tt>cond-expand</tt> forms.</p><h3 id="sec:Component_types"><a href="#sec:Component_types">Component types</a></h3><h4 id="sec:extension"><a href="#sec:extension">extension</a></h4><pre>[egg property] (extension NAME PROP ...)</pre><p>Specifies an extension library component. The properties <tt>PROP...</tt> are processed recursively and apply only to this component.</p><h4 id="sec:data"><a href="#sec:data">data</a></h4><pre>[egg property] (data NAME PROP ...)</pre><p>Specifies one or more arbitrary data files.</p><h4 id="sec:generated-source-file"><a href="#sec:generated-source-file">generated-source-file</a></h4><pre>[egg property] (generated-source-file NAME PROP ...)</pre><p>Specifies a file that is generated during the process of building the egg.</p><h4 id="sec:c-include"><a href="#sec:c-include">c-include</a></h4><pre>[egg property] (c-include NAME PROP ...)</pre><p>Specifies one or more C include files.</p><h4 id="sec:scheme-include"><a href="#sec:scheme-include">scheme-include</a></h4><pre>[egg property] (scheme-include NAME PROP ...)</pre><p>Specifies one or more Scheme include files.</p><h4 id="sec:program"><a href="#sec:program">program</a></h4><pre>[egg property] (program NAME PROP ...)</pre><p>Specifies an executable program.</p><h4 id="sec:c-object"><a href="#sec:c-object">c-object</a></h4><pre>[egg property] (c-object NAME PROP ...)</pre><p>Specifies a compiled C/C++ object file. Usually this component type is required if you want to link a separately compiled C/C++ module with your extension or program. C-objects are compiled like Scheme source files with the <tt>csc</tt> tool to ensure the same C compiler options and toolchain is used as for regular Scheme files compiled to C. If you want to pass compiler-specific options to the build of the C object, use the <tt>csc-options</tt> property and precede C compiler options with <tt>-C</tt>.</p><h3 id="sec:Component_properties"><a href="#sec:Component_properties">Component properties</a></h3><h4 id="sec:host"><a href="#sec:host">host</a></h4><pre>[egg property] (host PROP ...)</pre><p>Process <tt>PROP ...</tt> recursively for the current component, but apply the properties only to the host (build) part, when using a CHICKEN installation intended for cross-compilation.</p><h4 id="sec:target"><a href="#sec:target">target</a></h4><pre>[egg property] (target PROP ...)</pre><p>Process <tt>PROP ...</tt> recursively for the current component, but apply the properties only to the target part, when using a CHICKEN installation intended for cross-compilation.</p><h4 id="sec:linkage"><a href="#sec:linkage">linkage</a></h4><pre>[egg property] (linkage LINKAGE)</pre><p>Define whether the component should be linked dynamically or statically. <tt>LINKAGE</tt> can be <tt>static</tt> or <tt>dynamic</tt>. This property only makes sense for extension libraries.</p><h4 id="sec:types-file"><a href="#sec:types-file">types-file</a></h4><pre>[egg property] (types-file [NAME])</pre><p>Specifies that a &quot;type-database&quot; file should be generated and installed for this component. This property is only used for extension libraries. The name is optional and defaults to the name of the extensions (with the proper extension).</p><p>If <tt>NAME</tt> is a list of the form <tt>(predefined [NAME])</tt>, then no types file is created during compilation and an existing types file for this extension is assumed and installed.</p><h4 id="sec:inline-file"><a href="#sec:inline-file">inline-file</a></h4><pre>[egg property] (inline-file [NAME])</pre><p>Specifies that an &quot;inline&quot; file should be generated and installed for this component. This property is only used for extension libraries. The name is optional and defaults to the name of the extensions (with the proper extension).</p><h4 id="sec:custom-build"><a href="#sec:custom-build">custom-build</a></h4><pre>[egg property] (custom-build STRING)</pre><p>Specifies a custom build operation that should be executed instead of the default build operations. This property is mandatory for components of type <tt>generated-source-file</tt>. <tt>STRING</tt> should be the name of a shell command (e.g., a script) and thus may be platform sensitive.  The path to the file is prepended implicitly, so you should <b>not</b> prefix it with <tt>./</tt>.  On Windows, a file with the <tt>.bat</tt> extension will be picked before a plain file with no extension.</p><p>The script will be made executable on UNIX systems, if necessary, and will be invoked like the <tt>csc</tt> program and is executed with the location of the CHICKEN binaries in the <tt>PATH</tt>. Also, the following environment variables are set in the execution environment of the script:</p><ul><li><tt>CHICKEN_CC</tt>: name of the C compiler used for building CHICKEN</li>
<li><tt>CHICKEN_CXX</tt>: name of the C++ compiler set during the build of CHICKEN</li>
<li><tt>CHICKEN_CSC</tt>: path to <tt>csc</tt></li>
<li><tt>CHICKEN_CSI</tt>: path to <tt>csi</tt></li>
</ul>
<h4 id="sec:csc-options"><a href="#sec:csc-options">csc-options</a></h4><pre>[egg property] (csc-options OPTION ...)</pre><p>Specifies additional compiler options for <tt>csc</tt> that should be used when building this component. If this property is not given, the default options are used, which are <tt>-O2 -d1</tt> for extensions and programs and <tt>-O2 -d0</tt> for import libraries.</p><p>Note that the options are quoted when passed to csc during the compilation of the extension, so multiple options should be specified as <tt>(csc-options &quot;OPT1&quot; &quot;OPT2&quot; ...)</tt> instead of <tt>(csc-options &quot;OPT1 OPT2&quot;)</tt> (the latter would be a single option containing a whitespace character).</p><h4 id="sec:link-options"><a href="#sec:link-options">link-options</a></h4><pre>[egg property] (link-options OPTION ...)</pre><p>Specifies additional link options for <tt>csc</tt> that should be used when building this component.</p><p>Note that the options are quoted when passed to csc during the compilation of the extension, so multiple options should be specified as <tt>(link-options &quot;OPT1&quot; &quot;OPT2&quot; ...)</tt> instead of <tt>(link-options &quot;OPT1 OPT2&quot;)</tt> (the latter would be a single option containing a whitespace character).</p><p>Note that in order to pass linker options to the underlying C-compiler, these must be prefixed with <tt>-L</tt>, eg. <tt>(link-options &quot;-L&quot; &quot;-lpng&quot;)</tt>.</p><h4 id="sec:source"><a href="#sec:source">source</a></h4><pre>[egg property] (source NAME)</pre><p>Specifies an alternative source file, in case it has a name distinct from the component name. By default the source file for a component is named after the component, with the <tt>.scm</tt> extension added.</p><h4 id="sec:install-name"><a href="#sec:install-name">install-name</a></h4><pre>[egg property] (install-name NAME)</pre><p>Specifies an alternative installation name of the component, if it differs from the actual component name. This property is most useful if an egg installs an extension and a program of the same name, but needs to distinguish the components during build time.</p><h4 id="sec:component-dependencies"><a href="#sec:component-dependencies">component-dependencies</a></h4><pre>[egg property] (component-dependencies NAME ...)</pre><p>Specifies dependencies to other components. <tt>NAME ...</tt> must be the names of extension, program, scheme-include- or generated source file components that should be built before the current component.</p><h4 id="sec:source-dependencies"><a href="#sec:source-dependencies">source-dependencies</a></h4><pre>[egg property] (source-dependencies NAME ...)</pre><p>Specifies dependencies to additional source files. <tt>NAME ...</tt> must denote filenames of which the program or extension depends. A program or extension implicitly depends on its source file and and on the egg-specification file.</p><h4 id="sec:objects"><a href="#sec:objects">objects</a></h4><pre>[egg property] (objects NAME ...)</pre><p>Specifies that the components of type <tt>c-object</tt> should be linked to this component and that the object components are dependencies.</p><h4 id="sec:destination"><a href="#sec:destination">destination</a></h4><pre>[egg property] (destination NAME)</pre><p>Specifies an alternative installation destination for the built component and only applies to components of type <tt>data</tt>, <tt>c-include</tt> and <tt>scheme-include</tt>. This property should only be used in extreme cases, as it is recommended to use the default installation locations, which are:</p><ul><li>for C include files: <tt>&lt;PREFIX&gt;/include/chicken/</tt></li>
<li>for Scheme include files: <tt>&lt;PREFIX&gt;/share/chicken/</tt></li>
<li>for data files: <tt>&lt;PREFIX&gt;/share/chicken/</tt></li>
</ul>
<h4 id="sec:files"><a href="#sec:files">files</a></h4><pre>[egg property] (files NAME ...)</pre><p>Specifies source files for this component and only applies to components of type <tt>data</tt>, <tt>c-include</tt> and <tt>scheme-include</tt>. Both files and directories may be given and parent directories are created as needed.</p><h4 id="sec:modules"><a href="#sec:modules">modules</a></h4><pre>[egg property] (modules NAME ...)</pre><p>Specifies modules that the component (usually an extension) contains. <tt>chicken-install</tt> will compile and install all import libraries for the given modules. If this property is not given, then it is assumed that the extension has a single module of the same name as the component.</p><h4 id="sec:cond-expand"><a href="#sec:cond-expand">cond-expand</a></h4><pre>[egg property] (cond-expand CLAUSE ...)</pre><p>Similar to the toplevel <tt>cond-expand</tt> clause and may appear inside component specifications.</p><h4 id="sec:error"><a href="#sec:error">error</a></h4><pre>[egg property] (error STRING ARG ...)</pre><p>Similar to the toplevel <tt>error</tt> form, may appear inside component specifications.</p><hr /><p>Previous: <a href="Extension%20tools.html">Extension tools</a></p><p>Next: <a href="Units%20and%20linking%20model.html">Units and linking model</a></p></div></div></body></html>